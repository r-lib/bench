<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>High Precision Timing of R Expressions • bench</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet">
<link href="deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="High Precision Timing of R Expressions">
<meta name="description" content="Tools to accurately benchmark and analyze execution times for R expressions.">
<meta property="og:description" content="Tools to accurately benchmark and analyze execution times for R expressions.">
<meta name="robots" content="noindex">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">bench</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.1.3.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news">
<li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2018/06/bench-1.0.1/">bench 1.0.1</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="news/index.html">Changelog</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-lib/bench/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="bench">bench<a class="anchor" aria-label="anchor" href="#bench"></a>
</h1></div>
<!-- badges: start -->

<!-- badges: end -->
<p>The goal of bench is to benchmark code, tracking execution time, memory allocations and garbage collections.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the release version from <a href="https://cran.r-project.org/" class="external-link">CRAN</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"bench"</span><span class="op">)</span></span></code></pre></div>
<p>Or you can install the development version from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("pak")</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"r-lib/bench"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="features">Features<a class="anchor" aria-label="anchor" href="#features"></a>
</h2>
<p><code><a href="reference/mark.html">bench::mark()</a></code> is used to benchmark one or a series of expressions, we feel it has a number of advantages over <a href="#alternatives">alternatives</a>.</p>
<ul>
<li>Always uses the highest precision APIs available for each operating system (often nanoseconds).</li>
<li>Tracks memory allocations for each expression.</li>
<li>Tracks the number and type of R garbage collections per expression iteration.</li>
<li>Verifies equality of expression results by default, to avoid accidentally benchmarking inequivalent code.</li>
<li>Has <code><a href="reference/press.html">bench::press()</a></code>, which allows you to easily perform and combine benchmarks across a large grid of values.</li>
<li>Uses adaptive stopping by default, running each expression for a set amount of time rather than for a specific number of iterations.</li>
<li>Expressions are run in batches and summary statistics are calculated after filtering out iterations with garbage collections. This allows you to isolate the performance and effects of garbage collection on running time (for more details see <a href="https://radfordneal.wordpress.com/2014/02/02/inaccurate-results-from-microbenchmark/" class="external-link">Neal 2014</a>).</li>
</ul>
<p>The times and memory usage are returned as custom objects which have human readable formatting for display (e.g. <code>104ns</code>) and comparisons (e.g. <code>x$mem_alloc &gt; "10MB"</code>).</p>
<p>There is also full support for plotting with <a href="https://ggplot2.tidyverse.org/" class="external-link">ggplot2</a> including custom scales and formatting.</p>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<div class="section level3">
<h3 id="benchmark">
<code>bench::mark()</code><a class="anchor" aria-label="anchor" href="#benchmark"></a>
</h3>
<p>Benchmarks can be run with <code><a href="reference/mark.html">bench::mark()</a></code>, which takes one or more expressions to benchmark against each other.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://bench.r-lib.org/">bench</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">10000</span>, <span class="fl">1</span>, <span class="fl">1000</span><span class="op">)</span>, </span>
<span>  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">10000</span>, <span class="fl">1</span>, <span class="fl">1000</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><code><a href="reference/mark.html">bench::mark()</a></code> will throw an error if the results are not equivalent, so you don’t accidentally benchmark inequivalent code.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">bench</span><span class="fu">::</span><span class="fu"><a href="reference/mark.html">mark</a></span><span class="op">(</span></span>
<span>  <span class="va">dat</span><span class="op">[</span><span class="va">dat</span><span class="op">$</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">500</span>, <span class="op">]</span>,</span>
<span>  <span class="va">dat</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">499</span><span class="op">)</span>, <span class="op">]</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">dat</span>, <span class="va">x</span> <span class="op">&gt;</span> <span class="fl">500</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Error: Each result must equal the first result:</span></span>
<span><span class="co">#&gt; `dat[dat$x &gt; 500, ]` does not equal `dat[which(dat$x &gt; 499), ]`</span></span></code></pre></div>
<p>Results are easy to interpret, with human readable units.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bnch</span> <span class="op">&lt;-</span> <span class="fu">bench</span><span class="fu">::</span><span class="fu"><a href="reference/mark.html">mark</a></span><span class="op">(</span></span>
<span>  <span class="va">dat</span><span class="op">[</span><span class="va">dat</span><span class="op">$</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">500</span>, <span class="op">]</span>,</span>
<span>  <span class="va">dat</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">500</span><span class="op">)</span>, <span class="op">]</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">dat</span>, <span class="va">x</span> <span class="op">&gt;</span> <span class="fl">500</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">bnch</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 6</span></span>
<span><span class="co">#&gt;   expression                     min   median `itr/sec` mem_alloc `gc/sec`</span></span>
<span><span class="co">#&gt;   &lt;bch:expr&gt;                &lt;bch:tm&gt; &lt;bch:tm&gt;     &lt;dbl&gt; &lt;bch:byt&gt;    &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 dat[dat$x &gt; 500, ]           277µs    383µs     2485.     377KB     16.3</span></span>
<span><span class="co">#&gt; 2 dat[which(dat$x &gt; 500), ]    203µs    276µs     3635.     260KB     16.9</span></span>
<span><span class="co">#&gt; 3 subset(dat, x &gt; 500)         361µs    487µs     1981.     510KB     16.8</span></span></code></pre></div>
<p>By default the summary uses absolute measures, however relative results can be obtained by using <code>relative = TRUE</code> in your call to <code><a href="reference/mark.html">bench::mark()</a></code> or calling <code>summary(relative = TRUE)</code> on the results.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">bnch</span>, relative <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 6</span></span>
<span><span class="co">#&gt;   expression                  min median `itr/sec` mem_alloc `gc/sec`</span></span>
<span><span class="co">#&gt;   &lt;bch:expr&gt;                &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 dat[dat$x &gt; 500, ]         1.36   1.39      1.25      1.45     1   </span></span>
<span><span class="co">#&gt; 2 dat[which(dat$x &gt; 500), ]  1      1         1.84      1        1.03</span></span>
<span><span class="co">#&gt; 3 subset(dat, x &gt; 500)       1.78   1.77      1         1.96     1.03</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="benchpress">
<code>bench::press()</code><a class="anchor" aria-label="anchor" href="#benchpress"></a>
</h3>
<p><code><a href="reference/press.html">bench::press()</a></code> is used to run benchmarks against a grid of parameters. Provide setup and benchmarking code as a single unnamed argument then define sets of values as named arguments. The full combination of values will be expanded and the benchmarks are then <em>pressed</em> together in the result. This allows you to benchmark a set of expressions across a wide variety of input sizes, perform replications and other useful tasks.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span>
<span></span>
<span><span class="va">create_df</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">rows</span>, <span class="va">cols</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">replicate</a></span><span class="op">(</span><span class="va">cols</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">rows</span>, <span class="fl">1</span>, <span class="fl">100</span><span class="op">)</span>, simplify <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/setNames.html" class="external-link">setNames</a></span><span class="op">(</span><span class="va">out</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep_len</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="va">letters</span><span class="op">)</span>, <span class="va">cols</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">out</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">bench</span><span class="fu">::</span><span class="fu"><a href="reference/press.html">press</a></span><span class="op">(</span></span>
<span>  rows <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">10000</span><span class="op">)</span>,</span>
<span>  cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">10</span><span class="op">)</span>,</span>
<span>  <span class="op">{</span></span>
<span>    <span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">create_df</span><span class="op">(</span><span class="va">rows</span>, <span class="va">cols</span><span class="op">)</span></span>
<span>    <span class="fu">bench</span><span class="fu">::</span><span class="fu"><a href="reference/mark.html">mark</a></span><span class="op">(</span></span>
<span>      min_iterations <span class="op">=</span> <span class="fl">100</span>,</span>
<span>      bracket <span class="op">=</span> <span class="va">dat</span><span class="op">[</span><span class="va">dat</span><span class="op">$</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">500</span>, <span class="op">]</span>,</span>
<span>      which <span class="op">=</span> <span class="va">dat</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">500</span><span class="op">)</span>, <span class="op">]</span>,</span>
<span>      subset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">dat</span>, <span class="va">x</span> <span class="op">&gt;</span> <span class="fl">500</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Running with:</span></span>
<span><span class="co">#&gt;    rows  cols</span></span>
<span><span class="co">#&gt; 1  1000     2</span></span>
<span><span class="co">#&gt; 2 10000     2</span></span>
<span><span class="co">#&gt; 3  1000    10</span></span>
<span><span class="co">#&gt; 4 10000    10</span></span>
<span></span>
<span><span class="va">results</span></span>
<span><span class="co">#&gt; # A tibble: 12 × 8</span></span>
<span><span class="co">#&gt;    expression  rows  cols      min   median `itr/sec` mem_alloc `gc/sec`</span></span>
<span><span class="co">#&gt;    &lt;bch:expr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;bch:tm&gt; &lt;bch:tm&gt;     &lt;dbl&gt; &lt;bch:byt&gt;    &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 bracket     1000     2     27µs     34µs    27964.   15.84KB     19.6</span></span>
<span><span class="co">#&gt;  2 which       1000     2   25.7µs   33.4µs    29553.    7.91KB     17.7</span></span>
<span><span class="co">#&gt;  3 subset      1000     2   45.9µs   58.2µs    16793.    27.7KB     17.1</span></span>
<span><span class="co">#&gt;  4 bracket    10000     2   64.1µs   70.8µs    13447.  156.46KB     40.5</span></span>
<span><span class="co">#&gt;  5 which      10000     2   46.7µs   54.7µs    17586.   78.23KB     23.3</span></span>
<span><span class="co">#&gt;  6 subset     10000     2  116.2µs  132.1µs     7228.  273.79KB     40.9</span></span>
<span><span class="co">#&gt;  7 bracket     1000    10   77.2µs   85.4µs    11335.   47.52KB     19.9</span></span>
<span><span class="co">#&gt;  8 which       1000    10   67.8µs   75.2µs    13073.    7.91KB     23.2</span></span>
<span><span class="co">#&gt;  9 subset      1000    10   84.7µs  107.5µs     9281.   59.38KB     18.8</span></span>
<span><span class="co">#&gt; 10 bracket    10000    10  130.2µs  169.1µs     5799.   469.4KB     52.2</span></span>
<span><span class="co">#&gt; 11 which      10000    10   75.1µs     96µs    10187.   78.23KB     17.4</span></span>
<span><span class="co">#&gt; 12 subset     10000    10  222.7µs    253µs     3810.  586.73KB     43.3</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="plotting">Plotting<a class="anchor" aria-label="anchor" href="#plotting"></a>
</h2>
<p><code><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">ggplot2::autoplot()</a></code> can be used to generate an informative default plot. This plot is colored by gc level (0, 1, or 2) and faceted by parameters (if any). By default it generates a <a href="https://github.com/eclarke/ggbeeswarm#geom_quasirandom" class="external-link">beeswarm</a> plot, however you can also specify other plot types (<code>jitter</code>, <code>ridge</code>, <code>boxplot</code>, <code>violin</code>). See <code><a href="reference/autoplot.bench_mark.html">?autoplot.bench_mark</a></code> for full details.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-autoplot-1.png" width="100%"></p>
<p>You can also produce fully custom plots by un-nesting the results and working with the data directly.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">results</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">unnest</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">time</span>, <span class="va">gc</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">gc</span> <span class="op">==</span> <span class="st">"none"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>expression <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">expression</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">mem_alloc</span>, y <span class="op">=</span> <span class="va">time</span>, color <span class="op">=</span> <span class="va">expression</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="reference/scale_bench_expr.html">scale_color_bench_expr</a></span><span class="op">(</span><span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/pal_brewer.html" class="external-link">brewer_pal</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"qual"</span>, palette <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-custom-plot-1.png" width="100%"></p>
</div>
<div class="section level2">
<h2 id="system_time">
<code>system_time()</code><a class="anchor" aria-label="anchor" href="#system_time"></a>
</h2>
<p><strong>bench</strong> also includes <code><a href="reference/bench_time.html">system_time()</a></code>, a higher precision alternative to <a href="https://www.rdocumentation.org/packages/base/versions/3.5.0/topics/system.time" class="external-link">system.time()</a>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">bench</span><span class="fu">::</span><span class="fu"><a href="reference/bench_time.html">system_time</a></span><span class="op">(</span><span class="op">{</span> </span>
<span>  <span class="va">i</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>  <span class="kw">while</span><span class="op">(</span><span class="va">i</span> <span class="op">&lt;</span> <span class="fl">1e7</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">i</span> <span class="op">&lt;-</span> <span class="va">i</span> <span class="op">+</span> <span class="fl">1</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="co">#&gt; process    real </span></span>
<span><span class="co">#&gt;   222ms   223ms</span></span>
<span></span>
<span><span class="fu">bench</span><span class="fu">::</span><span class="fu"><a href="reference/bench_time.html">system_time</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">.5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; process    real </span></span>
<span><span class="co">#&gt;    88µs   502ms</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="alternatives">Alternatives<a class="anchor" aria-label="anchor" href="#alternatives"></a>
</h2>
<ul>
<li><a href="https://cran.r-project.org/package=rbenchmark" class="external-link">rbenchmark</a></li>
<li><a href="https://cran.r-project.org/package=microbenchmark" class="external-link">microbenchmark</a></li>
<li><a href="https://cran.r-project.org/package=tictoc" class="external-link">tictoc</a></li>
<li><a href="https://www.rdocumentation.org/packages/base/versions/3.5.0/topics/system.time" class="external-link">system.time()</a></li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=bench" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/r-lib/bench/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/r-lib/bench/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing bench</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.jimhester.com/" class="external-link">Jim Hester</a> <br><small class="roles"> Author </small>  </li>
<li>
<a href="https://github.com/DavisVaughan" class="external-link">Davis Vaughan</a> <br><small class="roles"> Author, maintainer </small>  </li>
<li>
<a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a> <br><small class="roles"> Copyright holder, funder </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=bench" class="external-link"><img src="https://www.r-pkg.org/badges/version/bench" alt="CRAN status"></a></li>
<li><a href="https://github.com/r-lib/bench/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/r-lib/bench/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/r-lib/bench?branch=main" class="external-link"><img src="https://codecov.io/gh/r-lib/bench/branch/main/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>

  </aside>
</div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.jimhester.com/" class="external-link">Jim Hester</a>, <a href="https://github.com/DavisVaughan" class="external-link">Davis Vaughan</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

  </div></footer>
</body>
</html>
